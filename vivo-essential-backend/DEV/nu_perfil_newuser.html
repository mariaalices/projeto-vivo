<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Meu Perfil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="./imagens/Boneco VIVO.png" />
    <script src="https://kit.fontawesome.com/4c3b22a05f.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #1c0033;
      }

      /* Sidebar */
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        height: 100%;
        width: 70px;
        background: rgb(233 213 255);
        overflow: hidden;
        transition: width 0.3s ease;
        z-index: 40;
      }

      .sidebar:hover {
        width: 220px;
      }

      .sidebar ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .sidebar ul li {
        display: flex;
        align-items: center;
        padding: 15px;
        cursor: pointer;
        transition: background 0.2s;
      }

      .sidebar ul li:hover {
        background: #635571;
      }

      .sidebar ul li img {
        width: 24px;
        height: 24px;
        flex-shrink: 0;
      }

      .sidebar ul li span {
        display: none;
        margin-left: 10px;
        opacity: 0;
        white-space: nowrap;
        transition: opacity 0.3s;
      }

      .sidebar:hover ul li span {
        opacity: 1;
        display: inline;
        color: black;
      }
    </style>
  </head>

  <body
    class="bg-gradient-to-br from-slate-900 via-purple-950 to-indigo-950 min-h-screen text-white"
  >
    <div
      class="sidebar fixed top-0 left-0 h-full w-20 hover:w-56 bg-purple-200 overflow-hidden transition-all duration-300 z-50"
    >
      <ul class="flex flex-col">
        <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
          <img src="./imagens/botao-de-inicio.png" class="w-6 h-6" alt="" />
          <span class="ml-3 text-black hidden sidebar-text"
            ><a href="home_newuser.html">Home</a></span
          >
        </li>
        <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
          <img src="./imagens/graduacao.png" class="w-6 h-6" alt="" />
          <span class="ml-3 text-black hidden sidebar-text"
            ><a href="nu_treinamento_ini.html">Meus Cursos</a></span
          >
        </li>
        <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
          <img src="./imagens/grafico-de-barras.png" class="w-6 h-6" alt="" />
          <span class="ml-3 text-black hidden sidebar-text"
            ><a href="nu_trilhastec_newuser.html">Trilha T√©cnica</a></span
          >
        </li>
        <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
          <img src="./imagens/perfil-de-usuario.png" class="w-6 h-6" alt="" />
          <span class="ml-3 text-black hidden sidebar-text"
            ><a href="nu_perfil_newuser.html">Meu Perfil</a></span
          >
        </li>
      </ul>
    </div>

    <main class="flex-1 p-4 md:ml-20 flex flex-col items-center gap-10">
      <header class="w-full max-w-4xl flex justify-between items-center">
        <h1 class="text-3xl font-bold text-purple-200">Perfil</h1>
        <div class="flex items-center space-x-4 relative">
          <img
            id="notifIcon"
            src="./imagens/packard-bell.png"
            alt="Notifica√ß√µes"
            class="w-7 h-6 cursor-pointer"
          />
          <!-- √çcone Vivinho IA -->
          <img
            src="./imagens/Boneco VIVO.png"
            alt="Vivinho IA"
            class="w-8 h-8 cursor-pointer hover:scale-110 transition-transform"
            title="Vivinho IA - Seu assistente virtual"
            onclick="alert('ü§ñ Vivinho IA\n\nOl√°! Sou seu assistente virtual da Vivo.\nEstou aqui para te ajudar com d√∫vidas sobre:\n\n‚Ä¢ Plataforma e navega√ß√£o\n‚Ä¢ Cursos e treinamentos\n‚Ä¢ VIVO Coins e recompensas\n‚Ä¢ Pol√≠ticas da empresa\n\nEm breve estarei dispon√≠vel para conversas!')"
          />
          <div
            id="notifModal"
            class="hidden absolute top-10 right-0 w-80 bg-white text-black rounded-lg shadow-lg z-50"
          ></div>

          <span id="welcomeMessage" class="text-purple-200 hidden sm:inline">Ol√°, Jo√£o</span>
          <a href="index.html">
            <button
              class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition logout-btn"
            >
              Desconectar
            </button>
          </a>
        </div>
      </header>

      <section
        class="max-w-4xl w-full bg-[#2f1f60] p-6 rounded-2xl shadow-[0_0_15px_#5737fe88] flex flex-col md:flex-row items-center gap-6"
      >
        <div class="w-20 h-20 rounded-full border-2 border-[#7a6deb] bg-[#4a3d8a] flex-shrink-0">
          <img src="./imagens/avatar.png" class="w-full h-full object-cover rounded-full" />
        </div>

        <div class="profile-info flex-1 text-[#d8ceff]">
          <h1 id="profileName" class="text-xl font-semibold mb-2">Jo√£o Oliveira Novato</h1>
          <hr class="border-t border-[#6f6bbe] opacity-60 mb-3" />
          <p id="profileEmail" class="mb-1"><strong>Email:</strong> joao.oliveira@vivo.com.br</p>
          <p class="mb-1"><strong>Membro desde:</strong> 20/09/2025</p>
          <p class="mb-1"><strong>Telefone:</strong> 11 98765-4321</p>
          <p><strong>Fun√ß√£o/√Årea:</strong>Desenvolvedor web</p>
        </div>
        <button
          class="bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg py-2 px-6 transition"
        >
          Editar perfil
        </button>
      </section>
      <section class="mb-8 max-w-4xl w-full mx-auto">
        <h2 class="text-white text-xl font-bold mb-4">Vis√£o Geral</h2>
        <div class="flex gap-6 flex-wrap">
          <div
            class="bg-[#2b1852] border border-gray-600/40 rounded-xl px-8 py-6 min-w-[120px] text-center"
          >
            <div class="text-3xl font-extrabold text-white">2</div>
            <div class="text-sm text-gray-300 mt-1">Cursos em andamento</div>
          </div>
          <div
            class="bg-[#2b1852] border border-gray-600/40 rounded-xl px-8 py-6 min-w-[120px] text-center"
          >
            <div class="text-3xl font-extrabold text-white">10</div>
            <div class="text-sm text-gray-300 mt-1">Cursos Feitos</div>
          </div>
          <div
            class="bg-[#2b1852] border border-gray-600/40 rounded-xl px-8 py-6 min-w-[120px] text-center"
          >
            <div class="text-3xl font-extrabold text-white">99 dias</div>
            <div class="text-sm text-gray-300 mt-1 flex items-center justify-center gap-1">
              <img src="./imagens/medalha.png" class="w-4 inline-block" />Ofensiva
            </div>
          </div>
          <div
            class="bg-[#2b1852] border border-gray-600/40 rounded-xl px-8 py-6 min-w-[120px] text-center"
          >
            <div class="text-3xl font-extrabold text-white">500</div>
            <div class="text-sm text-gray-300 mt-1 flex items-center justify-center gap-1">
              <img src="./imagens/star.png" class="w-4 inline-block" />Vivo Coins
            </div>
          </div>
        </div>
      </section>

      <!-- Medalhas e Conquistas -->
      <section class="mb-10 max-w-4xl w-full mx-auto">
        <div class="bg-[#3a197a] rounded-xl p-6">
          <div class="flex justify-between items-center mb-6">
            <span class="text-white text-base font-bold">Medalhas e Conquistas</span>
            <a href="#" class="text-purple-300 text-sm">Visualizar todas ‚Üí</a>
          </div>
          <div class="flex gap-6">
            <div class="flex flex-col items-center">
              <div
                class="w-16 h-16 rounded-full border-2 border-purple-400 flex items-center justify-center"
              >
                <img src="./imagens/medalha.png" alt="Conquistador" class="w-8" />
              </div>
              <span class="text-white text-xs mt-2">Colaborador</span>
            </div>
            <div class="flex flex-col items-center">
              <div class="w-16 h-16 rounded-full bg-[#251845] flex items-center justify-center">
                <img src="./imagens/star.png" alt="Maratonista" class="w-8" />
              </div>
              <span class="text-white text-xs mt-2">Empenhado</span>
            </div>
            <div class="flex flex-col items-center">
              <div class="w-16 h-16 rounded-full bg-[#251845] flex items-center justify-center">
                <img src="./imagens/lampada.png" alt="Curioso" class="w-8" />
              </div>
              <span class="text-white text-xs mt-2">Curioso</span>
            </div>
          </div>
        </div>
      </section>

      <section class="max-w-4xl w-full bg-[#2f1f60] p-6 rounded-2xl shadow-[0_0_15px_#5737fe88]">
        <h3 class="text-lg font-semibold text-purple-300 mb-4 text-center">
          Desempenho Comparativo da Equipe
        </h3>
        <div class="w-full h-[400px]">
          <canvas id="teamPerformanceChart"></canvas>
        </div>
      </section>
    </main>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const notifIcon = document.getElementById('notifIcon');
        const notifModal = document.getElementById('notifModal');
        if (notifIcon && notifModal) {
          notifIcon.addEventListener('click', (e) => {
            e.stopPropagation();
            notifModal.classList.toggle('hidden');
          });
          document.addEventListener('click', (e) => {
            if (!notifModal.contains(e.target) && e.target !== notifIcon) {
              notifModal.classList.add('hidden');
            }
          });
        }

        // Atualiza√ß√£o din√¢mica do usu√°rio
        const userData = JSON.parse(localStorage.getItem('userData'));
        const welcomeMessage = document.getElementById('welcomeMessage');
        const profileName = document.getElementById('profileName');
        const profileEmail = document.getElementById('profileEmail');

        if (userData && userData.nome) {
          welcomeMessage.textContent = `Ol√°, ${userData.nome.split(' ')[0]}`;
          profileName.textContent = userData.nome;
          profileEmail.innerHTML = `<strong>Email:</strong> ${userData.email}`;
        }

        // L√≥gica do Novo Gr√°fico de Barras Agrupadas
        const ctxBar = document.getElementById('teamPerformanceChart');
        if (ctxBar) {
          new Chart(ctxBar, {
            type: 'bar',
            data: {
              labels: ['Ana', 'Maria', 'Jo√£o', 'Pedro', 'Jorge'], // Eixo X: Nomes dos funcion√°rios
              datasets: [
                {
                  label: 'Cursos Conclu√≠dos',
                  data: [5, 3, 6, 4, 5], // Exemplo: N¬∫ de cursos conclu√≠dos
                  backgroundColor: 'rgb(138, 82, 241)', // Roxo
                },
                {
                  label: 'Cursos em Andamento',
                  data: [2, 4, 1, 3, 2], // Exemplo: N¬∫ de cursos em andamento
                  backgroundColor: 'rgb(255, 152, 0)', // Laranja
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  position: 'top',
                  labels: {
                    color: '#fff',
                  },
                },
              },
              scales: {
                x: {
                  ticks: { color: '#ccc' },
                  grid: { display: false },
                },
                y: {
                  beginAtZero: true,
                  ticks: {
                    color: '#ccc',
                    precision: 0,
                  },
                  grid: { color: 'rgba(255, 255, 255, 0.1)' },
                },
              },
            },
          });
        }
      });
    </script>

    <!-- Chatling AI -->
    <script>
      window.chtlConfig = { chatbotId: '3149227724' };
    </script>
    <script
      async
      data-id="3149227724"
      id="chtl-script"
      type="text/javascript"
      src="https://chatling.ai/js/embed.js"
    ></script>
  </body>
</html>
