<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Meu Perfil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/4c3b22a05f.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="../../css/style.css" />
    <link rel="stylesheet" href="../../css/sidebar.css" />
    <link rel="stylesheet" href="../../css/notifications.css" />
    <link rel="stylesheet" href="../../css/perfil_newuser.css" />
  </head>

  <body
    class="bg-gradient-to-br from-slate-900 via-purple-950 to-indigo-950 min-h-screen flex flex-col"
  >
    <div
      class="sidebar fixed top-0 left-0 h-full w-20 hover:w-56 bg-purple-200 overflow-hidden transition-all duration-300 z-50 md:block hidden"
    >
      <ul class="flex flex-col">
        <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
          <img src="../../imagens/home.jpg" class="w-6 h-6" alt="Home" />
          <span class="ml-3 text-black hidden sidebar-text">Home</span>
        </li>
        <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
          <img src="../../imagens/cursos.jpg" class="w-6 h-6" alt="Meus Cursos" />
          <span class="ml-3 text-black hidden sidebar-text">Meus Cursos</span>
        </li>
        <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
          <img src="../../imagens/desenvolvimento.jpg" class="w-6 h-6" alt="Meu Desenvolvimento" />
          <span class="ml-3 text-black hidden sidebar-text">Meu Desenvolvimento</span>
        </li>
        <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
          <img src="../../imagens/perfil2.jpg" class="w-6 h-6" alt="Meu Perfil" />
          <span class="ml-3 text-black hidden sidebar-text">Meu Perfil</span>
        </li>
        <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
          <img src="../../imagens/configuracao.jpg" class="w-6 h-6" alt="Configura√ß√µes" />
          <span class="ml-3 text-black hidden sidebar-text">Configura√ß√µes</span>
        </li>
      </ul>
    </div>

    <button
      id="menuBtn"
      class="md:hidden fixed top-4 left-4 z-60 bg-purple-600 text-white p-2 rounded-md shadow-lg"
    >
      <i class="fas fa-bars"></i>
    </button>

    <div
      id="mobileSidebar"
      class="fixed top-0 left-0 h-full w-56 bg-purple-200 overflow-auto transition-transform transform -translate-x-full z-50 md:hidden"
    >
      <ul class="flex flex-col mt-20">
        <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
          <img src="../../imagens/home.jpg" class="w-6 h-6" alt="Home" />
          <span class="ml-3 text-black">Home</span>
        </li>
        <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
          <img src="../../imagens/cursos.jpg" class="w-6 h-6" alt="Meus Cursos" />
          <span class="ml-3 text-black">Meus Cursos</span>
        </li>
        <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
          <img src="../../imagens/desenvolvimento.jpg" class="w-6 h-6" alt="Meu Desenvolvimento" />
          <span class="ml-3 text-black">Meu Desenvolvimento</span>
        </li>
        <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
          <img src="../../imagens/perfil2.jpg" class="w-6 h-6" alt="Meu Perfil" />
          <span class="ml-3 text-black">Meu Perfil</span>
        </li>
        <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
          <img src="../../imagens/configuracao.jpg" class="w-6 h-6" alt="Configura√ß√µes" />
          <span class="ml-3 text-black">Configura√ß√µes</span>
        </li>
      </ul>
    </div>

    <main class="flex-1 p-4 md:ml-[220px] mt-16 md:mt-4 flex flex-col gap-10">
      <header
        class="flex flex-col md:flex-row justify-between items-center md:items-end gap-4 md:gap-0"
      >
        <h1 class="text-3xl font-bold text-purple-200">P√°gina Inicial</h1>

        <div class="flex items-center space-x-4 relative">
          <img
            id="notifIcon"
            src="../../imagens/packard-bell.png"
            alt="Notifica√ß√µes"
            class="w-7 h-6 rounded-full cursor-pointer"
          />

          <span class="text-purple-200 hidden sm:inline select-none">Ol√°, Novo Usu√°rio</span>
          <button
            class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition whitespace-nowrap select-none"
          >
            Desconectar
          </button>

          <div
            id="notifModal"
            class="hidden absolute top-10 right-0 w-96 bg-white text-black rounded-2xl shadow-lg p-3 z-50 max-h-72 overflow-y-auto"
          >
            <div class="notif-item">
              <img src="../../imagens/avatar.png" alt="Avatar" />
              <p>
                <strong>Sistema:</strong> Parece que o usu√°rio XXXXX est√° terminando o curso, agende
                seu 1:1 com ele =)
              </p>
            </div>
            <div class="notif-item">
              <img src="../../imagens/avatar.png" alt="Avatar" />
              <p>
                <strong>Buddy:</strong> Oie, estou preocupado com certo onboard aqui, podemos
                conversar?
              </p>
            </div>
            <div class="notif-item">
              <img src="../../imagens/avatar.png" alt="Avatar" />
              <p>
                <strong>Sistema:</strong> Parece que o usu√°rio XXXXX est√° terminando o curso, agende
                seu 1:1 com ele =)
              </p>
            </div>
            <div class="notif-item">
              <img src="../../imagens/avatar.png" alt="Avatar" />
              <p>
                <strong>Buddy:</strong> Fala xxxx, bora trocar uma palavra? Vi que est√° um pouco
                atrasado... posso te ajudar? =)
              </p>
            </div>
          </div>
        </div>
      </header>

      <section
        class="max-w-4xl w-full bg-[#2f1f60] p-6 rounded-2xl shadow-[0_0_15px_#5737fe88] flex flex-col md:flex-row items-center gap-6 mx-auto"
      >
        <div
          class="profile-image w-20 h-20 rounded-full border-2 border-[#7a6deb] bg-[#4a3d8a] flex-shrink-0"
        ></div>

        <div class="profile-info flex-1 text-[#d8ceff]">
          <h1 class="text-xl font-semibold mb-2">Bruna Oliveira Novato</h1>
          <hr class="border-t border-[#6f6bbe] opacity-60 mb-3" />
          <p class="mb-1"><strong>Email:</strong> bruna.novato@vivo.com.br</p>
          <p class="mb-1"><strong>Membro desde:</strong> 20/05/2025</p>
          <p class="mb-1"><strong>Telefone:</strong> 11 98765-4321</p>
          <p><strong>Fun√ß√£o/√Årea:</strong> Novo desenvolvedor web</p>
        </div>

        <button
          class="edit-profile-btn bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg py-2 px-6 whitespace-nowrap transition select-none"
        >
          Editar perfil
        </button>
      </section>

      <section class="visao-geral max-w-4xl mx-auto">
        <h2>Vis√£o Geral</h2>
        <div class="cards">
          <div class="card">
            <div class="numero">2</div>
            <div class="descricao">Cursos em andamento</div>
          </div>
          <div class="card">
            <div class="numero">0</div>
            <div class="descricao">Cursos conclu√≠dos</div>
          </div>
          <div class="card">
            <div class="numero">5 dias</div>
            <div class="descricao"><span class="emoji">üî•</span>Ofensiva</div>
          </div>
          <div class="card">
            <div class="numero">500</div>
            <div class="descricao"><span class="coin">‚óâ</span>Vivo Coins</div>
          </div>
        </div>
      </section>

      <section
        class="max-w-4xl w-full bg-[#461791] rounded-2xl p-6 shadow-[0_0_20px_#3a107888] mx-auto text-[#d6c6ff]"
      >
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-xl font-semibold">Medalhas e Conquistas</h2>
          <button class="text-sm font-semibold text-purple-300 hover:text-purple-100 transition">
            Visualizar todas ‚Üí
          </button>
        </div>
        <div class="flex gap-6 flex-wrap justify-start">
          <div class="conquista destaque">
            <img src="../../imagens/medalha.png" class="w-6 h-6" alt="Imagem de uma medalha" />
            Conquistador
          </div>
          <div class="conquista">
            <img src="../../imagens/star.png" class="w-6 h-6" alt="Imagem de uma estrela" />
            Maratonista
          </div>
          <div class="conquista">
            <img src="../../imagens/lampada.png" class="w-6 h-6" alt="Imagem de uma l√¢mpada" />
            Curioso
          </div>
        </div>
      </section>

      <div class="container max-w-4xl mx-auto">
        <h2 class="titulo_cursos">Meus Cursos</h2>
        <div class="tabs">
          <div class="tab active" data-tab="em-andamento">Em andamento</div>
          <div class="tab" data-tab="concluidos">Conclu√≠dos</div>
        </div>

        <div class="courses-list" id="em-andamento-list"></div>

        <div class="courses-list" id="concluidos-list" style="display: none"></div>
      </div>

      <section class="avaliacao-container max-w-4xl mx-auto">
        <h2>Avalie como est√° sua rela√ß√£o com o Buddy:</h2>
        <div class="flex justify-center space-x-6 mb-4 flex-wrap">
          <button class="text-4xl select-none">üò†</button>
          <button class="text-4xl select-none">üòï</button>
          <button class="text-4xl select-none">üòê</button>
          <button class="text-4xl select-none">üòä</button>
          <button class="text-4xl select-none">üòç</button>
        </div>
        <h2>Nos conte o motivo:</h2>
        <textarea
          class="w-full rounded-lg bg-slate-700 text-white p-3 mb-4 resize-none"
          rows="2"
          placeholder="Escreva um motivo..."
        ></textarea>
        <div class="flex justify-center">
          <button
            class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition whitespace-nowrap select-none"
          >
            Enviar Avalia√ß√£o
          </button>
        </div>
      </section>
    </main>

    <button
      class="fixed bottom-8 right-8 bg-purple-600 text-white rounded-full w-12 h-12 flex items-center justify-center text-2xl shadow-lg hover:bg-purple-700 transition select-none"
    >
      ?
    </button>

    <script>
      // Toggle notifica√ß√£o
      const notifIcon = document.getElementById('notifIcon');
      const notifModal = document.getElementById('notifModal');
      notifIcon.addEventListener('click', () => {
        notifModal.classList.toggle('hidden');
      });

      document.addEventListener('click', (e) => {
        if (!notifIcon.contains(e.target) && !notifModal.contains(e.target)) {
          notifModal.classList.add('hidden');
        }
      });

      // Toggle menu mobile
      const menuBtn = document.getElementById('menuBtn');
      const mobileSidebar = document.getElementById('mobileSidebar');

      menuBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        if (mobileSidebar.classList.contains('-translate-x-full')) {
          mobileSidebar.classList.remove('-translate-x-full');
        } else {
          mobileSidebar.classList.add('-translate-x-full');
        }
      });

      // Fechar menu ao clicar fora (mobile)
      document.addEventListener('click', (e) => {
        if (!mobileSidebar.contains(e.target) && !menuBtn.contains(e.target)) {
          mobileSidebar.classList.add('-translate-x-full');
        }
      });

      // Dados iniciais do curso
      const cursoInicial = {
        id: 1,
        titulo: 'Introdu√ß√£o √† Cultura VIVO',
        descricao: 'Conhe√ßa os valores, a hist√≥ria e a estrutura da VIVO',
        progresso: 85,

        // id: 2,
        // titulo: "Ciberseguran√ßa",
        // descricao: "Aprenda a proteger nossos sistemas e informa√ß√µes contra amea√ßas digitais, garantindo confidencialidade, integridade e disponibilidade dos dados.",
        // progresso: 48,
      };

      const tabs = document.querySelectorAll('.tab');
      const emAndamentoList = document.getElementById('em-andamento-list');
      const concluidosList = document.getElementById('concluidos-list');

      function criarCardCurso(curso, concluido = false) {
        const card = document.createElement('div');
        card.classList.add('course-card');
        card.dataset.id = curso.id;

        card.innerHTML = `
        <div class="course-header">
          <div class="course-title">${curso.titulo}</div>
          <button class="btn-access">
            Acessar curso ‚Üí
          </button>
        </div>
        <div class="descricao" style="font-size:0.85rem; color:#cfc0ff; margin-bottom: 4px;">
          ${curso.descricao}
        </div>
        <div class="progress-wrapper">
          <div class="progress-bar" style="width:${curso.progresso}%;"></div>
        </div>
        <div class="progress-info">${curso.progresso}% conclu√≠do</div>
        ${
          concluido
            ? ''
            : `<div class="actions-row"><button class="btn-complete">Conclu√≠do</button></div>`
        }
      `;

        if (!concluido) {
          const btnConcluir = card.querySelector('.btn-complete');
          btnConcluir.addEventListener('click', () => {
            adicionarConcluido(curso);
            card.remove();
            if (emAndamentoList.childElementCount === 0) {
              emAndamentoList.innerHTML = `<p style="color:#d3b7ff; font-style: italic">Nenhum curso em andamento.</p>`;
            }
          });
        }

        return card;
      }

      // Adiciona curso conclu√≠do
      function adicionarConcluido(curso) {
        if ([...concluidosList.children].some((card) => card.dataset.id == curso.id)) {
          return;
        }

        if (concluidosList.textContent.includes('Nenhum curso conclu√≠do.')) {
          concluidosList.textContent = '';
        }

        const curso100 = { ...curso, progresso: 100 };
        const card = criarCardCurso(curso100, true);
        concluidosList.appendChild(card);
      }

      function inicializar() {
        emAndamentoList.textContent = '';
        concluidosList.textContent = 'Nenhum curso conclu√≠do.';
        emAndamentoList.appendChild(criarCardCurso(cursoInicial));
      }

      // Controle tabs
      tabs.forEach((tab) => {
        tab.addEventListener('click', () => {
          tabs.forEach((t) => t.classList.remove('active'));
          tab.classList.add('active');

          const tabSelecionada = tab.dataset.tab;
          if (tabSelecionada === 'em-andamento') {
            emAndamentoList.style.display = 'flex';
            concluidosList.style.display = 'none';
          } else {
            emAndamentoList.style.display = 'none';
            concluidosList.style.display = 'flex';
            if (concluidosList.childElementCount === 0) {
              concluidosList.textContent = 'Nenhum curso conclu√≠do.';
            }
          }
        });
      });

      inicializar();
    </script>
  </body>
</html>
