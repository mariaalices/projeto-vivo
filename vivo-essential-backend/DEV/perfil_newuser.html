<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Meu Perfil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="./imagens/Boneco VIVO.png">
    <script src="https://kit.fontawesome.com/4c3b22a05f.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { margin: 0; font-family: Arial, sans-serif; background: #1c0033; }
        .sidebar { position: fixed; top: 0; left: 0; height: 100%; width: 70px; background: rgb(233 213 255); overflow: hidden; transition: width 0.3s ease; z-index: 50; }
        .sidebar:hover { width: 220px; }
        .sidebar ul { list-style-type: none; padding: 0; margin: 0; }
        .sidebar ul li a { display: flex; align-items: center; padding: 15px; cursor: pointer; transition: background 0.2s; text-decoration: none; color: inherit; }
        .sidebar ul li a:hover { background: #635571; }
        .sidebar ul li img { width: 24px; height: 24px; flex-shrink: 0; }
        .sidebar ul li span { display: none; margin-left: 10px; opacity: 0; white-space: nowrap; transition: opacity 0.3s; color: black; }
        .sidebar:hover ul li span { opacity: 1; display: inline; }
    </style>
</head>

<body class="bg-gradient-to-br from-slate-900 via-purple-950 to-indigo-950 min-h-screen text-white">
    <div class="sidebar">
        <ul>
            <li><a href="home_newuser.html"><img src="./imagens/botao-de-inicio.png" alt="Home"><span>Home</span></a></li>
            <li><a href="treinamento_ini.html"><img src="./imagens/graduacao.png" alt="Meus Cursos"><span>Meus Cursos</span></a></li>
            <li><a href="perfil_newuser.html"><img src="./imagens/grafico-de-barras.png" alt="Meu Desenvolvimento"><span>Meu Desenvolvimento</span></a></li>
            <li><a href="perfil_newuser.html"><img src="./imagens/configuracoes.png" alt="Meus Ajustes"><span>Meus Ajustes</span></a></li>
        </ul>
    </div>

    <main class="flex-1 p-4 md:ml-20 flex flex-col items-center gap-10">
        <header class="w-full max-w-4xl flex justify-between items-center">
            <h1 class="text-3xl font-bold text-purple-200">Perfil</h1>
            <div class="flex items-center space-x-4 relative">
                <img id="notifIcon" src="./imagens/packard-bell.png" alt="Notificações" class="w-7 h-6 cursor-pointer">
                <div id="notifModal" class="hidden absolute top-10 right-0 w-80 bg-white text-black rounded-lg shadow-lg z-50"></div>
                
                <span id="welcomeMessage" class="text-purple-200 hidden sm:inline">Olá, Novo Usuário</span>
                <a href="index.html">
                    <button class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition logout-btn">Desconectar</button>
                </a>
            </div>
        </header>

        <section class="max-w-4xl w-full bg-[#2f1f60] p-6 rounded-2xl shadow-[0_0_15px_#5737fe88] flex flex-col md:flex-row items-center gap-6">
            <div class="w-20 h-20 rounded-full border-2 border-[#7a6deb] bg-[#4a3d8a] flex-shrink-0">
                <img src="./imagens/avatar.png" class="w-full h-full object-cover rounded-full" />
            </div>
            
            <div class="profile-info flex-1 text-[#d8ceff]">
                <h1 id="profileName" class="text-xl font-semibold mb-2">Bruna Oliveira Novato</h1>
                <hr class="border-t border-[#6f6bbe] opacity-60 mb-3" />
                <p id="profileEmail" class="mb-1"><strong>Email:</strong> bruna.novato@vivo.com.br</p>
                <p class="mb-1"><strong>Membro desde:</strong> 20/05/2025</p>
                <p class="mb-1"><strong>Telefone:</strong> 11 98765-4321</p>
                <p><strong>Função/Área:</strong> Novo desenvolvedor web</p>
            </div>
            <button class="bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg py-2 px-6 transition">Editar perfil</button>
        </section>

        <section class="max-w-4xl w-full bg-[#2f1f60] p-6 rounded-2xl shadow-[0_0_15px_#5737fe88]">
            <h3 class="text-lg font-semibold text-purple-300 mb-4 text-center">Desempenho Comparativo da Equipe</h3>
            <div class="w-full h-[400px]">
                <canvas id="teamPerformanceChart"></canvas>
            </div>
        </section>
        </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const notifIcon = document.getElementById('notifIcon');
            const notifModal = document.getElementById('notifModal');
            if (notifIcon && notifModal) {
                notifIcon.addEventListener('click', (e) => {
                    e.stopPropagation();
                    notifModal.classList.toggle('hidden');
                });
                document.addEventListener('click', (e) => {
                    if (!notifModal.contains(e.target) && e.target !== notifIcon) {
                        notifModal.classList.add('hidden');
                    }
                });
            }

            // Atualização dinâmica do usuário
            const userData = JSON.parse(localStorage.getItem('userData'));
            const welcomeMessage = document.getElementById('welcomeMessage');
            const profileName = document.getElementById('profileName');
            const profileEmail = document.getElementById('profileEmail');

            if (userData && userData.nome) {
                welcomeMessage.textContent = `Olá, ${userData.nome.split(' ')[0]}`;
                profileName.textContent = userData.nome;
                profileEmail.innerHTML = `<strong>Email:</strong> ${userData.email}`;
            }

            // Lógica do Novo Gráfico de Barras Agrupadas
            const ctxBar = document.getElementById('teamPerformanceChart');
            if (ctxBar) {
                new Chart(ctxBar, {
                    type: 'bar',
                    data: {
                        labels: ['Ana', 'Maria', 'João', 'Pedro', 'Jorge'], // Eixo X: Nomes dos funcionários
                        datasets: [{
                            label: 'Cursos Concluídos',
                            data: [5, 3, 6, 4, 5], // Exemplo: Nº de cursos concluídos
                            backgroundColor: 'rgb(138, 82, 241)', // Roxo
                        }, {
                            label: 'Cursos em Andamento',
                            data: [2, 4, 1, 3, 2], // Exemplo: Nº de cursos em andamento
                            backgroundColor: 'rgb(255, 152, 0)', // Laranja
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    color: '#fff' 
                                }
                            }
                        },
                        scales: {
                            x: {
                                ticks: { color: '#ccc' },
                                grid: { display: false }
                            },
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    color: '#ccc',
                                    precision: 0 
                                },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            }
                        }
                    }
                });
            }
        });
    </script>
    
</body>
</html>