<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Desempenho</title>
  <link rel="icon" href="./imagens/logo-vivo.png" type="image/png">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* (mantive todo o CSS original sem conflitos) */
  </style>
</head>

<body>
  <!-- Sidebar -->
  <div
    class="sidebar fixed top-0 left-0 h-full w-20 hover:w-56 bg-purple-200 overflow-hidden transition-all duration-300 z-50">
    <ul class="flex flex-col">
      <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
        <img src="./imagens/botao-de-inicio.png" class="w-6 h-6" alt="">
        <span class="ml-3 text-black hidden sidebar-text"><a href="">Home</a></span>
      </li>
      <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
        <img src="./imagens/graduacao.png" class="w-6 h-6" alt="">
        <span class="ml-3 text-black hidden sidebar-text"><a href="">Apadrinhamento</a></span>
      </li>
      <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
        <img src="./imagens/grafico-de-barras.png" class="w-6 h-6" alt="">
        <span class="ml-3 text-black hidden sidebar-text"><a href="trilhastec_gestor.html">Desempenho</a></span>
      </li>
      <li class="flex items-center p-4 hover:bg-purple-400 cursor-pointer">
        <img src="./imagens/perfil-de-usuario.png" class="w-6 h-6" alt="">
        <span class="ml-3 text-black hidden sidebar-text"><a href="">Meu Perfil</a></span>
      </li>
    </ul>
  </div>

  <!-- Conteúdo principal -->
  <main>
    <header>
      <h1>Desempenho</h1>
      <div class="user-actions relative">
        <img id="notifIcon" src="./imagens/packard-bell.png" alt="Notificações" title="Notificações" />
        <span>Olá, Novo Usuário</span>
        <a href="index.html">
          <button class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition logout-btn">
            Desconectar
          </button>
        </a>

        <div id="notifModal" aria-label="Notificações">
          <div class="notif-item">
            <img src="./imagens/avatar.png" alt="Avatar" />
            <p><strong>Sistema:</strong> Parece que o usuário XXXXX está terminando o curso, agende seu 1:1 com ele =)
            </p>
          </div>
          <div class="notif-item">
            <img src="./imagens/avatar.png" alt="Avatar" />
            <p><strong>Buddy:</strong> Oie, estou preocupado com certo onboard aqui, podemos conversar?</p>
          </div>
        </div>
      </div>
    </header>

    <!-- Resumo -->
    <section aria-labelledby="resumo-title">
      <h2 id="resumo-title">Resumo do onboarding</h2>
      <div class="resumo-container" role="region" aria-label="Resumo do onboarding">
        <img src="./imagens/sinal-perigo.png" alt="Sinal de perigo" />
        <p class="message">
          Usuário apresenta dificuldades iniciais. Recomendamos acompanhamento mais próximo.
        </p>
        <button class="button" type="button">Solicitar</button>
      </div>
    </section>

    <!-- Perfil novo usuário -->
    <section aria-labelledby="perfil-novo-usuario">
      <h2 id="perfil-novo-usuario">Perfil do Novo Usuário</h2>
      <div class="profile-box" role="region" aria-label="Perfil do novo usuário">
        <div class="profile-image flex items-center justify-center" aria-label="Foto de perfil do novo usuário">
          <img src="./imagens/pessoa1.jpg" alt=""
            style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%; box-shadow: 0 0 10px #8b56ec inset;">
        </div>
        <div class="profile-info">
          <strong>Gustavo Almeida Coxtos</strong>
          <span>Estagiario TI - Dev. Backend</span>
          <div class="description-label">Descrição:</div>
          <div class="description-text">
            Iniciando na área de TI, com foco em backend. Motivada, comprometida e em aprendizado contínuo para
            evoluir tecnicamente.
          </div>
        </div>
      </div>
    </section>

    <!-- Avaliação -->
    <section aria-labelledby="avaliacao-desempenho">
      <h2 id="avaliacao-desempenho">Avaliação de Desempenho</h2>
      <div class="chart-container" role="region" aria-label="Gráfico de avaliação de desempenho">
        <svg id="chart" viewBox="0 0 900 300" aria-label="Gráfico de avaliação de desempenho" role="img">
          <!-- Gráfico via JS -->
        </svg>
      </div>
    </section>

    <!-- Buddy -->
    <section aria-labelledby="perfil-responsavel">
      <h2 id="perfil-responsavel">Perfil do buddy responsável</h2>
      <div class="profile-box" role="region" aria-label="Perfil do buddy responsável">
        <div class="profile-image flex items-center justify-center" aria-label="Foto de perfil do novo usuário">
          <img src="./imagens/pessoa3.jpg" alt=""
            style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%; box-shadow: 0 0 10px #8b56ec inset;">
        </div>
        <div class="profile-info">
          <strong>Ana Clara</strong>
          <span>Júnior TI - Dev. Front-end</span>
          <div class="description-label">Descrição:</div>
          <div class="description-text">
            Disponível para apoiar o onboarding, orientar atividades e resolver dúvidas
            do novo colaborador.
          </div>
          <button class="button buddy-button" type="button"><a href="apadrinhamento_gestor.html">Trocar Buddy</a></button>
        </div>
      </div>
    </section>
  </main>

  <!-- Botão flutuante -->
  <script> window.chtlConfig = { chatbotId: "3149227724" } </script>
  <script async data-id="3149227724" id="chtl-script" type="text/javascript"
    src="https://chatling.ai/js/embed.js"></script>

  <!-- Notificações -->
  <script>
    const notifIcon = document.getElementById('notifIcon');
    const notifModal = document.getElementById('notifModal');
    notifIcon.addEventListener('click', (e) => {
      e.stopPropagation();
      notifModal.classList.toggle('active');
    });
    document.addEventListener('click', (e) => {
      if (!notifModal.contains(e.target) && e.target !== notifIcon) {
        notifModal.classList.remove('active');
      }
    });
  </script>

  <!-- Gráfico -->
  <script>
    const svg = document.getElementById("chart");
    const positionsY = { "Adiantado": 50, "Regular": 150, "Atrasado": 250 };
    const etapasX = { "Etapa 1": 90, "Etapa 2": 170, "Etapa 3": 270, "Etapa 4": 370, "Etapa 5": 470, "Etapa 6": 570, "Etapa 8": 670 };
    const avaliacao = { "Etapa 1": "Adiantado", "Etapa 2": "Regular", "Etapa 3": "Atrasado", "Etapa 4": "Atrasado", "Etapa 5": "Regular", "Etapa 6": "Adiantado", "Etapa 8": "Regular" };

    function createStar(cx, cy, radius, points = 5) {
      let path = "";
      const step = Math.PI / points;
      for (let i = 0; i < 2 * points; i++) {
        const r = (i % 2 === 0) ? radius : radius / 2;
        const x = cx + r * Math.sin(i * step);
        const y = cy - r * Math.cos(i * step);
        path += (i === 0 ? "M" : "L") + x + "," + y;
      }
      path += "Z";
      return path;
    }

    const group = document.createElementNS("http://www.w3.org/2000/svg", "g");
    svg.appendChild(group);

    const etapaKeys = Object.keys(avaliacao);
    for (let i = 0; i < etapaKeys.length - 1; i++) {
      const etapaA = etapaKeys[i];
      const etapaB = etapaKeys[i + 1];
      const x1 = etapasX[etapaA], y1 = positionsY[avaliacao[etapaA]];
      const x2 = etapasX[etapaB], y2 = positionsY[avaliacao[etapaB]];
      const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
      line.setAttribute("x1", x1); line.setAttribute("y1", y1); line.setAttribute("x2", x2); line.setAttribute("y2", y2);
      line.setAttribute("class", "line");
      group.appendChild(line);
    }

    for (const [etapa, nivel] of Object.entries(avaliacao)) {
      const cx = etapasX[etapa], cy = positionsY[nivel];
      const pathData = createStar(cx, cy, 15);
      const star = document.createElementNS("http://www.w3.org/2000/svg", "path");
      star.setAttribute("d", pathData);
      star.setAttribute("class", "star");
      star.setAttribute("aria-label", `${etapa} - ${nivel}`);
      group.appendChild(star);
    }

    Object.entries(positionsY).forEach(([label, y]) => {
      const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
      text.setAttribute("x", 25); text.setAttribute("y", y + 6); text.setAttribute("class", "y-labels");
      text.textContent = label;
      svg.appendChild(text);
    });

    Object.entries(etapasX).forEach(([label, x]) => {
      const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
      text.setAttribute("x", x); text.setAttribute("y", 290); text.setAttribute("text-anchor", "middle");
      text.setAttribute("class", "x-labels");
      text.textContent = label;
      svg.appendChild(text);
    });
  </script>

  <script src="/js/script.js"></script>
</body>
</html>
